//=========================================================
// src/Interrupts.c: generated by Hardware Configurator
//
// This file will be regenerated when saving a document.
// leave the sections inside the "$[...]" comment tags alone
// or they will be overwritten!
//=========================================================

// USER INCLUDES			
#include <SI_EFM8BB2_Register_Enums.h>

//-----------------------------------------------------------------------------
// Global Constants
//-----------------------------------------------------------------------------
// Configurator set for HFOSC/8
#define SYSCLK                3062500

// Configurator set for  overflow of 50 ms / 20 Hz.
// We use resulting TH and TL values as the reload values. they are:
#define TIMER0_RELOAD_HIGH    0xF3
#define TIMER0_RELOAD_LOW     0x89

//-----------------------------------------------------------------------------
// Pin Definitions
//-----------------------------------------------------------------------------
SI_SBIT (LED1, SFR_P1, 4);

//-----------------------------------------------------------------------------
// TIMER0_ISR
//-----------------------------------------------------------------------------
//
// TIMER0 ISR Content goes here. Remember to clear flag bits:
// TCON::TF0 (Timer 0 Overflow Flag)
//
// Here we process the Timer0 interrupt and toggle the LED
//
//-----------------------------------------------------------------------------
SI_INTERRUPT(TIMER0_ISR, TIMER0_IRQn)
{
   LED1 = !LED1;                       // Toggle the LED

   TCON_TR0 = 0;                       // Stop Timer 0

   TH0 = TIMER0_RELOAD_HIGH;           // Reset Timer0 High register
   TL0 = TIMER0_RELOAD_LOW;            // Reset Timer0 Low register

   TCON_TR0 = 1;                       // Start Timer 0
}



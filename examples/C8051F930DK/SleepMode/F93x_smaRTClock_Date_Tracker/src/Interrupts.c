//=========================================================
// src/Interrupts.c: generated by Hardware Configurator
//
// This file will be regenerated when saving a document.
// leave the sections inside the "$[...]" comment tags alone
// or they will be overwritten!
//=========================================================


// USER INCLUDES
#include <SI_C8051F930_Register_Enums.h>

//-----------------------------------------------------------------------------
// Global Constants and Variables
//-----------------------------------------------------------------------------

// Software flags to indicate smaRTClock events are pending
extern bit Alarm_Pending;
extern bit smaRTClock_Fail;
//-----------------------------------------------------------------------------
// RTC0ALARM_ISR
//-----------------------------------------------------------------------------
//
// RTC0ALARM ISR Content goes here. Remember to clear flag bits:
// RTC0CN::ALRM (RTC Alarm Event Flag and Auto Reset Enable)
//
//-----------------------------------------------------------------------------
SI_INTERRUPT(RTC0ALARM_ISR, RTC0ALARM_IRQn)
{
	EIE1 &= ~0x02;                      // Disable the Alarm interrupt

	Alarm_Pending = 1;                  // Set the software flag
}



//-----------------------------------------------------------------------------
// RTC0FAIL_ISR
//-----------------------------------------------------------------------------
//
// RTC0FAIL ISR Content goes here. Remember to clear flag bits:
// RTC0CN::OSCFAIL (RTC Oscillator Fail Event Flag)
//
//-----------------------------------------------------------------------------
SI_INTERRUPT(RTC0FAIL_ISR, RTC0FAIL_IRQn)
{
	EIE2 &= ~0x04;                      // Disable the Clock Fail interrupt

	smaRTClock_Fail = 1;                // Set the software flag
}


